<section class="breadcrumb-option">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb breadcrumb-chevron p-3 bg-body-tertiary rounded-2">
        <li class="breadcrumb-item">
          <a class="link-body-emphasis" href="/admin">
            <svg class="bi" width="16" height="16">
              <use xlink:href="#house-door-fill"></use>
            </svg>
            <span class="visually-hidden">Dashboard</span>
          </a>
        </li>
        <li class="breadcrumb-item">
          <a class="link-body-emphasis fw-semibold text-decoration-none text-success"
            href="/admin/products">Products</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Add Product</li>
      </ol>
    </nav>
  </div>
</section>

<div
  class="container d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">
    <%= locals.title ? locals.title : 'Dashboard' %>
  </h1>
</div>

<div class="main-panel">
  <div class="content-wrapper">
    <div class="col-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <div class="text-dark">
            <h4 class="card-title">Add New Product</h4>
          </div>
          <form class="addProductForm" action="/admin/products/add-product" method="post" enctype="multipart/form-data"
            onsubmit="return validateForm()" novalidate>
            <div class="form-group row">
              <div class="col-6">
                <label for="product_name" class="text-dark">Product Title</label>
                <input type="text" class="form-control text-dark text-justify" name="product_name" id="product_name"
                  placeholder="Name">
                <span id="productNameError" class="text-danger"></span>
              </div>
              <div class="col-6">
                <label for="actualPrice" class="text-dark">Actual Price</label>
                <input type="number" class="form-control text-dark" id="actualPrice" name="actualPrice"
                  placeholder="Price">
                <div id="priceError" class="text-danger"></div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row">
                  <div class="col-sm-12">
                    <div class="form-group">
                      <label for="category" class="text-dark">Categories:</label>
                      <select class="form-select text-capitalize" name="category" required>
                        <% categories.forEach(function(category) { %>
                          <option class="text-capitalize" value="<%= category._id %>">
                            <%= category.name %>
                          </option>
                          <% }); %>
                      </select>
                    </div>
                    <div id="categoryError" class="text-danger"></div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group row">
                  <div class="col-sm-12">
                    <label for="sellingPrice" class="text-dark">Discount Price</label>
                    <input type="number" class="form-control text-dark" id="sellingPrice" name="sellingPrice"
                      placeholder="Price">
                    <div id="genderError" class="text-danger"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row">
                  <div class="col-sm-12">
                    <label for="brand_name" class="text-dark">Brand</label>
                    <input type="text" class="form-control text-dark" id="brand_name" name="brand_name"
                      placeholder="Brand Name" onkeyup="capitalizeFirstLetter(this)">
                    <span id="brandError" class="text-danger"></span>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group row">
                  <div class="col-sm-12">
                    <label for="product_stock" class="text-dark">Stock</label>
                    <input type="number" class="form-control text-dark" id="product_stock" name="stock"
                      placeholder="Enter Stock">
                    <span id="quantityError" class="text-danger"></span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group mt-2">
              <label for="description" class="text-dark">Description</label>
              <textarea name="description" class="form-control text-dark" id="description" rows="4"></textarea>
              <span id="descriptionError" class="text-danger"></span>
            </div>
            <div class="row d-flex justify-content-between mt-3">
              <div class="col-lg-3 col-md-6 rounded-image-preview">
                <label for="imageInput1" class="image-label">Image 1
                  <div class="rounded-image-preview">
                    <img id="imagePreview1" class="img-fluid img-thumbnail"
                      src="https://www.creativefabrica.com/wp-content/uploads/2021/04/05/Image-Upload-Icon-Graphics-10388650-1-580x386.jpg"
                      alt="Preview" />
                  </div>
                  <input name="image1" type="file" accept="image/*" id="imageInput1" class="imageInput"
                    onchange="updateImagePreview(this, 'imagePreview1')">
                </label>
                <span id="imageError1" class="text-danger"></span>
              </div>
              <div class="col-lg-3 col-md-6 rounded-image-preview">
                <label for="imageInput2" class="image-label">Image 2
                  <div class="rounded-image-preview">
                    <img id="imagePreview2" class="img-fluid img-thumbnail"
                      src="https://www.creativefabrica.com/wp-content/uploads/2021/04/05/Image-Upload-Icon-Graphics-10388650-1-580x386.jpg"
                      alt="Preview" />
                  </div>
                  <input name="image2" type="file" accept="image/*" id="imageInput2" class="imageInput"
                    onchange="updateImagePreview(this, 'imagePreview2')">
                </label>
                <span id="imageError2" class="text-danger"></span>
              </div>
              <div class="col-lg-3 col-md-6 rounded-image-preview">
                <label for="imageInput3" class="image-label">Image 3
                  <div class="rounded-image-preview">
                    <img id="imagePreview3" class="img-fluid img-thumbnail"
                      src="https://www.creativefabrica.com/wp-content/uploads/2021/04/05/Image-Upload-Icon-Graphics-10388650-1-580x386.jpg"
                      alt="Preview" />
                  </div>
                  <input name="image3" type="file" accept="image/*" id="imageInput3" class="imageInput"
                    onchange="updateImagePreview(this, 'imagePreview3')">
                </label>
                <span id="imageError3" class="text-danger"></span>
              </div>
              <div class="col-lg-3 col-md-6 rounded-image-preview">
                <label for="imageInput4" class="image-label">Image 4
                  <div class="rounded-image-preview">
                    <img id="imagePreview4" class="img-fluid img-thumbnail"
                      src="https://www.creativefabrica.com/wp-content/uploads/2021/04/05/Image-Upload-Icon-Graphics-10388650-1-580x386.jpg"
                      alt="Preview" />
                  </div>
                  <input name="image4" type="file" accept="image/*" id="imageInput4" class="imageInput"
                    onchange="updateImagePreview(this, 'imagePreview4')">
                </label>
                <span id="imageError4" class="text-danger"></span>
              </div>
            </div>
            <button type="submit" class="btn btn-lg btn-success mr-2 mt-5">Add product</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script defer>
  function updateImagePreview(input, previewId) {
    var preview = document.getElementById(previewId);
    var file = input.files[0];
    var reader = new FileReader();

    reader.onloadend = function () {
      preview.src = reader.result;
    }

    if (file) {
      reader.readAsDataURL(file);
    } else {
      preview.src = "https://www.creativefabrica.com/wp-content/uploads/2021/04/05/Image-Upload-Icon-Graphics-10388650-1-580x386.jpg";
    }
  }
</script>