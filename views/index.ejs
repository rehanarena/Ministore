<main class="main">
    <div class="intro-slider-container">
        <div class="intro-slider owl-carousel owl-theme owl-nav-inside owl-light mb-0" data-toggle="owl"
            data-owl-options='{
              "dots": true,
              "nav": false, 
              "responsive": {
                  "1200": {
                      "nav": true,
                      "dots": false
                  }
              }
          }'>
            <div class="intro-slide" style="background-image: url(/assets/images/demos/demo-8/slider/slide-1.jpg);">
                <div class="container intro-content text-left">
                    <h3 class="intro-subtitle">Limited time only *</h3><!-- End .h3 intro-subtitle -->
                    <h1 class="intro-title">Summer<br><strong>sale</strong></h1><!-- End .intro-title -->
                    <h3 class="intro-subtitle">Up to 50% off</h3><!-- End .h3 intro-subtitle -->

                    <a href="#" class="btn">
                        <span>SHOP NOW</span>
                        <i class="icon-long-arrow-right"></i>
                    </a>
                </div><!-- End .intro-content -->
                <img class="position-right" src="/assets/images/demos/demo-8/slider/img-1.png">
            </div><!-- End .intro-slide -->

            <div class="intro-slide" style="background-image: url(/assets/images/demos/demo-8/slider/slide-2.jpg);">
                <div class="container intro-content text-right">
                    <h3 class="intro-subtitle">PREMIUM QUALITY</h3><!-- End .h3 intro-subtitle -->
                    <h1 class="intro-title">coats <span class="highlight">&</span><br>jackets</h1>
                    <!-- End .intro-title -->

                    <a href="#" class="btn">
                        <span>SHOP NOW</span>
                        <i class="icon-long-arrow-right"></i>
                    </a>
                </div><!-- End .intro-content -->
                <img class="position-left" src="/assets/images/demos/demo-8/slider/img-2.png">
            </div><!-- End .intro-slide -->
        </div><!-- End .intro-slider owl-carousel owl-simple -->

        <span class="slider-loader"></span><!-- End .slider-loader -->
    </div><!-- End .intro-slider-container -->



    <div class="container recent-arrivals py-5 my-3">
        <div class="heading heading-flex align-items-center mb-3">
            <h2 class="title title-lg">Recent Arrivals</h2><!-- End .title -->
        </div><!-- End .heading -->


        <div class="container justify-content-center">
            <div class="row justify-content-center py-3 my-3">
                <% products.forEach(element=> { %>

                    <div class="col-md-3  p-2 m-2  text-capitalize card border rounded">
                        <a href="/search">
                            <img class="img-fluid img-thumbnail" src="/uploads/cropped/<%- element.images.image1 %>" alt="<%- element.product_name %>">
                        </a>
                        
            
                        <p class="h4 card-title"><%- element.product_name %></p>
                        <div class="card-body">
                            <p class="lead card-text"><%- element.sellingPrice %></p>
                            <p class="lead card-text"><del><%- element.actualPrice %></del></p>

                        </div>
                        <div class="card-footer justify-content-center">
                            <button onclick="addToCart('<%- element._id %>')" class="btn btn-outline-primary"
                                type="button">Add To Cart</button>
                        </div>
                    </div>
                    <% }) %>

            </div>
        </div>




    </section>


    <section class="py-6 brands">
      <div class="container">
        <% if (categories !== 'undefined') { %>
          <h4 class="text-uppercase text-center mb-5">Categories</h4>
          <!-- Brands Slider-->
          <div class="owl-carousel owl-theme brands-slider">
            <!-- item-->
            <% categories?.forEach((category, index) => { %>
              <div class="item card border-0 d-flex align-items-center justify-content-center">
                <a href="/shop?category=<%- category._id %>">
                <div class="w-8rem">
                  <% if (category.onOffer) { %>
                    <div class="ribbon ribbon-info">On offer <%- category.offerDiscountRate %>%</div>
                  <% } %>
                  
                  <div class="card-img-overlay d-flex align-items-top">
                    <div class="w-100 py-3">
                      <p class="display-3 pt-6 text-center text-white fw-semibold fs-3 text-capitalize"><%- category.name %></p>
                    </div>
                  </div>  
                  </div>
                </a>
                </div>
            <% }) %>
            
            
          </div>
        <% } %>
      </div>
    </section>






    </div>
    </div>
    </section>


    <!-- Banner-->

    <div class="trending">
        <a href="#">
            <img src="/assets/images/demos/demo-8/banners/banner-4.jpg" alt="Banner">
        </a>
        <div class="banner banner-big d-md-block">
            <div class="banner-content text-center">
                <h4 class="banner-subtitle text-white">Trending</h4><!-- End .banner-subtitle -->
                <h3 class="banner-title text-white">New League</h3><!-- End .banner-title -->
                <p class="d-none d-lg-block text-white">Lorem ipsum dolor sit amet, consectetuer adipiscing
                    elit.<br>Donec odio. Quisque volutpat mattis eros. </p>

                <a href="#" class="btn btn-primary-white"><span>Shop Now</span><i class="icon-long-arrow-right"></i></a>
            </div><!-- End .banner-content -->
        </div><!-- End .banner -->
    </div>



    <!-- Payment & Delivery box -->
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-rocket"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Payment & Delivery</h3><!-- End .icon-box-title -->
                        <p>Free shipping for orders over $50</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->

            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-rotate-left"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Return & Refund</h3><!-- End .icon-box-title -->
                        <p>Free 100% money back guarantee</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->

            <div class="col-lg-4 col-sm-6">
                <div class="icon-box icon-box-card text-center">
                    <span class="icon-box-icon">
                        <i class="icon-life-ring"></i>
                    </span>
                    <div class="icon-box-content">
                        <h3 class="icon-box-title">Quality Support</h3><!-- End .icon-box-title -->
                        <p>Alway online feedback 24/7</p>
                    </div><!-- End .icon-box-content -->
                </div><!-- End .icon-box -->
            </div><!-- End .col-lg-4 col-sm-6 -->
        </div><!-- End .row -->
    </div><!-- End .container -->

    <div class="container instagram">
        <div class="heading text-center">
            <h2 class="title title-lg">Follow Us On Instagram</h2><!-- End .title -->
            <p class="title-desc">Wanna share your style with us?</p><!-- End .title-desc -->
        </div><!-- End .heading -->
    </div><!-- End .container -->

    <div class="owl-carousel owl-simple" data-toggle="owl" data-owl-options='{
          "nav": false, 
          "dots": false,
          "items": 6,
          "margin": 0,
          "loop": false,
          "responsive": {
              "0": {
                  "items":1
              },
              "360": {
                  "items":2
              },
              "600": {
                  "items":3
              },
              "992": {
                  "items":4
              },
              "1200": {
                  "items":5
              },
              "1500": {
                  "items":6
              }
          }
      }'>
        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/1.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>466</a>
                <a href="#"><i class="icon-comments"></i>65</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->

        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/2.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>39</a>
                <a href="#"><i class="icon-comments"></i>78</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->

        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/3.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>691</a>
                <a href="#"><i class="icon-comments"></i>87</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->

        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/4.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>508</a>
                <a href="#"><i class="icon-comments"></i>124</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->

        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/5.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>433</a>
                <a href="#"><i class="icon-comments"></i>27</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->

        <div class="instagram-feed">
            <img src="/assets/images/demos/demo-8/instagram/6.jpg" alt="img">

            <div class="instagram-feed-content">
                <a href="#"><i class="icon-heart-o"></i>122</a>
                <a href="#"><i class="icon-comments"></i>55</a>
            </div><!-- End .instagram-feed-content -->
        </div><!-- End .instagram-feed -->
    </div><!-- End .owl-carousel -->
</main><!-- End .main -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script defer>
    const addToCart = async (productId) => {
        console.log(productId);
        try {
            const response = await fetch(`/user/add-to-cart/${productId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const data = await response.json()

            if (!response.ok) {
                throw new Error(data.message);
            }
            console.log(data);
            if(data.success){

                Swal.fire({
                    title: 'Success!',
                    text: 'Product added to cart successfully.',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            }else{
                Swal.fire({
                title: 'Error!',
                text: data.message,
                icon: 'error',
                confirmButtonText: 'OK'
            });
            }
        } catch (error) {
            Swal.fire({
                title: 'Error!',
                text: error.message,
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }
    }
</script>