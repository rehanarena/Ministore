
<style>
    /* Style the main product image container */
    .product-image {
      width: 200px;
      height: 200px;
      padding: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #ccc;
      cursor: pointer;
      overflow: hidden;
    }

    /* Style the image preview for the main product image */
    #imagePreview1 {
      max-width: 100%;
      max-height: 100%;
    }

    /* Style the child image container */
    #childMain {
      display: flex;
      margin-top: 10px;
    }

    /* Style each child image section */
    .image-list li {
      width: 100px;
      height: 100px;
      margin-right: 10px;
      /* Add some spacing between child image sections */
    }

    /* Style the child image labels */
    .preview-container {
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #ccc;
      cursor: pointer;
    }

    /* Style the child image previews */
    .image-preview {
      max-width: 100%;
      max-height: 100%;
    }

    /* Hide the default file input styles */
    .input-hidden {
      display: none;
    }
  </style>

 

      <!-- /#page-content-wrapper -->
      <div class="container">
        <div style="width: 50vw;">
          <div class="form-group m-3">
            <label for="productName">Product Name : </label>
            <input type="text" name="ProductName" class="form-control bg-light" id="productName"
              placeholder="Product name"/>
            <div class="error" id="productNameError"></div>
          </div><br>
          <div class="form-group m-3">
            <label for="productDescription">Product Description:</label>
            <textarea class="form-control bg-light" name="Description" id="productDescription" rows="4"
              placeholder="Enter product description"></textarea>
            <div class="error" id="description-error"></div>
            
          </div>
          <form action="/admin/addproduct" method="post" id="form" enctype="multipart/form-data" class="bg-gradient">
            <div class="d-flex">
              <div style="height: 650px;">
                <div class="column-xs-12 column-mD-5 d-flex m-3">
                  <div class="product-gallery d-flex">
                    <label class="product-image "
                      style="width: 600px; height: 600px; padding-bottom: 5px; display: flex; align-items: center; justify-content: center; overflow: hidden;;">
                      <input type="file" id="productImage1" accept="image/*" class="input-hidden"
                        onchange="previewImage(this,event, 'imagePreview1')" name="productMainImage" multiple required>
                      <img id="imagePreview1" class="image-preview" style="width: 100%;height:auto;">
                    </label>
                    <div class="d-block flex-row" style="height:600px; width:200px">
                      <label class="product-image"
                        style="width: 200px; height: 200px; padding-bottom: 5px; display: flex;">
                        <!-- <input type="file" id="productImage1" accept="image/*" class="input-hidden" onchange="previewImage(this,event, 'imagePreview2')" name="productMainImage"> -->
                        <img id="imagePreview2" class="image-preview">
                      </label>
                      <label class="product-image"
                        style="width: 200px; height: 200px; padding-bottom: 5px; display: flex;">
                        <!-- <input type="file" id="productImage1" accept="image/*" class="input-hidden" onchange="previewImage(this,event, 'imagePreview3')" name="productMainImage"> -->
                        <img id="imagePreview3" class="image-preview">
                      </label>
                      <label class="product-image"
                        style="width: 200px; height:200px; padding-bottom: 5px; display: flex;">
                        <!-- <input type="file" id="productImage1" accept="image/*" class="input-hidden" onchange="previewImage(this,event, 'imagePreview4')" name="productMainImage"> -->
                        <img id="imagePreview4" class="image-preview">
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            

              
              </div>
              <br>
            </div>
          </div>
          <div class="d-flex">
            <div style="width:50rem">
              
              <div class="border p-3 m-3">
                <h2>Pricing</h2>
                <div class="form-group">
                  <label for="basePrice">Acutal Price:</label>
                  <input type="number" name="Price" class="form-control bg-light" id="basePrice"
                  placeholder="Enter base price"/>
                  <div class="error" id="priceerror"></div>
                </div>
                <br>
                <div class="form-group">
                  <label for="discountAmount">Discount Amount:</label>
                  <input type="number" name="DiscountAmount" class="form-control bg-light" id="discountAmount"
                  placeholder="Enter discount amount"/>
                  <div class="error" id="discError"></div>
                </div>
              </div>
              <div class="border p-3 m-3">
                <h2>Stock</h2>
                <div class="form-group">
                  <label for="quantity">Quantity:</label>
                  <input type="number" name="AvailableQuantity" class="form-control bg-light" id="quantity"
                  placeholder="Enter quantity"/>
                  <div class="error" id="quantityError"></div>
                </div>
              </div>
            </div>
            <div class="border p-3 m-3" style="width:50rem;">
              <div class="">
                <div class="form-group">
                  <br>
                  
                </div><br>
                <div class="form-group">
                  <br>
                  <label>Brand Name:</label>
                  <select name="BrandName" class="form-select bg-light" id="brand" required>
                    <option value="" selected disabled>Select a Brand</option>
                    <option>Chanel</option>
                    <option>H&M</option>
                    <option>Adidas</option>
                    <option>Nike</option>
                    <option>Gucci</option>
                  </select>
                </div><br>
                <!-- <div class="form-group">  
                  <label for="tags">Tags:</label>
                  <input type="text" class="form-control bg-light" name="Tags" id="tags" placeholder="Enter tags"/>
                </div> -->
                <div class="d-flex justify-content-evenly m-4">
                  <button type="submit" class="btn btn-primary">Submit</button>
                  <button type="reset" class="btn btn-warning">Clear</button>
                </div>
              </div>
              
              
          
            </div>
          </div>

        </form>
      </div>
    </main>
    </div>
    </div>
<!-- Modal for Cropping -->
<div class="modal fade" id="cropModal" tabindex="-1" role="dialog" aria-labelledby="cropModalLabel" aria-hidden="true" style="">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cropModalLabel">Crop Image</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" >
        <img id="cropperImage" src="#" alt="Croppable Image"  />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="cropImage()">Crop</button>
      </div>
    </div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
  <script>

function capitalizeFirstLetter(input) {
    input.value = input.value.charAt(0).toUpperCase() + input.value.slice(1);
  }

$(document).ready(function() {
  $(".imageInput").change(function() {
    var input = this;
    var imagePreview = $(input).siblings('.rounded-image-preview').children('img')[0];

    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function(e) {
        imagePreview.src = e.target.result;
        $(imagePreview).show();
      };

      reader.readAsDataURL(input.files[0]);
    }
  });
});

// Initialize Cropper.js instance
var cropper;

// Function to open the Cropper modal
function openModal(imageId) {
  var image = document.getElementById(imageId);
  var cropperImage = document.getElementById('cropperImage');

  cropperImage.src = image.src;

  // Ensure that any existing Cropper instance is destroyed before initializing a new one
  if (cropper) {
    cropper.destroy();
  }

  $('#cropModal').modal('show');

  // Initialize Cropper.js for the selected image
  cropper = new Cropper(cropperImage, {
    aspectRatio: 0,
    viewMode: 0,
  });
}

function cropImage(imageIndex) {
  // Get the cropped canvas
  var canvas = cropper.getCroppedCanvas();

  // Convert the canvas to a data URL
  var croppedImageDataUrl = canvas.toDataURL();

  // Set the cropped image as the source of the original image preview
  var imagePreview = document.getElementById('imagePreview' + imageIndex);
  if (imagePreview) {
    imagePreview.src = croppedImageDataUrl;
  }

  // Set the data URL as the value of the corresponding image input field
  var imageInput = document.getElementById('imageInput' + imageIndex);
  if (imageInput) {
    imageInput.value = croppedImageDataUrl;
  }

  // Close the Cropper modal
  $('#cropModal').modal('hide');
}

  // ... your existing script ...

  // Function to open the Cropper modal for a specific image
  function openImageCropper(imageIndex) {
    var imageInput = document.getElementById('imageInput' + imageIndex);
    var cropperImage = document.getElementById('cropperImage');

    // Check if a file is selected
    if (imageInput.files && imageInput.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        cropperImage.src = e.target.result;

        // Ensure that any existing Cropper instance is destroyed before initializing a new one
        if (cropper) {
          cropper.destroy();
        }

        // Show the Cropper modal
        $('#cropModal').modal('show');

        // Initialize Cropper.js for the selected image
        cropper = new Cropper(cropperImage, {
          aspectRatio: 1,
          viewMode: 2,
        });
      };

      // Read the selected file as a data URL
      reader.readAsDataURL(imageInput.files[0]);
    }
  }
    var el = document.getElementById("wrapper");
    var toggleButton = document.getElementById("menu-toggle");

    toggleButton.onclick = function () {
      el.classList.toggle("toggled");
    };
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('form');
        const productInput = document.getElementById('productName');
        const productDescription = document.getElementById('productDescription');
        const productSpecificationinput1 = document.getElementById('productSpecification1');
        const productSpecificationinput2 = document.getElementById('productSpecification2');
        const productSpecificationinput3 = document.getElementById('productSpecification3');
        const basepriceInput = document.getElementById('basePrice');
        const discAmountInput = document.getElementById('discountAmount');
        const quantityInput = document.getElementById('quantity');
        const nameError = document.getElementById('productNameError');
        const descriptionError = document.getElementById('description-error');
        const specierror1 = document.getElementById('specificationError1');
        const specierror2 = document.getElementById('specificationError2');
        const specierror3 = document.getElementById('specificationError3');
        const priceerror = document.getElementById('priceerror');
    const quantityError = document.getElementById('quantityError');
    const discError = document.getElementById('discError');
        form.addEventListener("submit", function (event) {

          //resetting previous error message
          nameError.innerHTML = "";
          descriptionError.innerHTML = "";
          specierror1.innerHTML = "";
          specierror2.innerHTML = "";
          specierror3.innerHTML = "";
          priceerror.innerHTML = "";
          quantityError.innerHTML= "";
          discError.innerHTML= "";
          //validate emailInput
          const nameValue = productInput.value.trim()
          const descriptionValue = productDescription.value.trim();
          const speciValue1 = productSpecificationinput1.value.trim()
          const speciValue2 = productSpecificationinput2.value.trim()
          const speciValue3 = productSpecificationinput3.value.trim()
          if (nameValue === "") {
            event.preventDefault(); 
            nameError.innerHTML = "product name can't be empty"
            return
          }
          if (descriptionValue === "") {
            event.preventDefault(); 
            descriptionError.innerHTML = "Please fill out description"
            return
          }
          //validate password input

          if (speciValue1 === "") {
            event.preventDefault(); 
            specierror1.innerHTML = "Confirm Password field can't be empty";
            return
            
          }
          if (speciValue2 === "") {
            event.preventDefault(); 
            specierror2.innerHTML = "Confirm Password field can't be empty";
            return
            
          }
          if (speciValue3 === "") {
            event.preventDefault(); 
            specierror3.innerHTML = "Confirm Password field can't be empty";
            return
            
          }
          if (isNaN(parseFloat(basepriceInput.value)) || parseFloat(basepriceInput.value) <= 0) {
            event.preventDefault()
          priceerror.innerHTML = "Price must be a positive number.";
          return

        }

        if (isNaN(parseInt(quantityInput.value)) || parseInt(quantityInput.value) < 0) {
          event.preventDefault()
          quantityError.innerHTML = "stock must be a non-negative integer.";
          return;
        }
        if (isNaN(parseInt(discAmountInput.value)) || parseInt(discAmountInput.value) < 0) {
          event.preventDefault()
          discError.innerHTML = "amount must be a non-negative integer.";
          return;
        }
        if(discAmountInput.value>basepriceInput.value){
            event.preventDefault()
          priceerror.innerHTML = "Price must be greater than discounted amount.";
          return

        }
        const productImageInput = document.getElementById('productImage1');
         if (productImageInput.files.length > 4) {
        event.preventDefault();
        alert('You should select only four images.');
        return;
    }
        })
      })

  </script>

  <!-------validation------>
  <script src="/js/admin/products/add-product.js"></script>
</body>

</html>




//  const categoryIdInput = document.getElementById("category-id"); 
                    //  const categoryId = categoryIdInput.value.trim(); 